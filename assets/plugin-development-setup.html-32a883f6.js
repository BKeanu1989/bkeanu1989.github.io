import{_ as o,M as a,p as l,q as c,R as n,t as s,N as t,V as u,Q as r,a1 as e}from"./framework-52ca566e.js";const d={},k=n("h1",{id:"plugin-development-beispiel",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#plugin-development-beispiel","aria-hidden":"true"},"#"),s(" Plugin Development Beispiel")],-1),g=n("p",null,"Wir werden ein Plugin entwickeln, welches einen Benutzer ermöglicht sich für ein Offline Event anzumelden. Die Berechtigung erfolgt nach einem Kauf eines Produkts. Daraufhin wird zur Verifizierung ein Ticketcode erstellt und nach fertiger Anmeldung ein QR Code verschickt, das die Daten der Anmeldung widerspiegelt.",-1),v=n("p",null,"Zusätzlich soll es möglich sein, dass ein Ticketcode im Dashboard genierbar sein soll.",-1),m=n("h2",{id:"boilerplate",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#boilerplate","aria-hidden":"true"},"#"),s(" Boilerplate")],-1),b={href:"https://wppb.me",target:"_blank",rel:"noopener noreferrer"},h=e('<h2 id="anforderungen" tabindex="-1"><a class="header-anchor" href="#anforderungen" aria-hidden="true">#</a> Anforderungen</h2><ul><li>QR Code</li><li>Admin Menu</li><li>Tailwind CSS</li><li>Woocommerce</li><li>Anmeldeseite</li><li>Pdf?</li></ul><h2 id="technologien" tabindex="-1"><a class="header-anchor" href="#technologien" aria-hidden="true">#</a> Technologien</h2><ul><li>Docker</li><li>Wordpress</li><li>Composer</li><li>VueJs</li></ul><h2 id="start" tabindex="-1"><a class="header-anchor" href="#start" aria-hidden="true">#</a> Start</h2><p>So sieht unsere Dateistruktur zum Anfang unseres Projekts aus.</p>',6),_=e(`<p>Da das Plugin abhängig von Woocommerce ist, müssen wir es bei der Aktivierung prüfen. Das können wir ganz einfach mit folgendem Snippet machen.</p><p>class-sample-plugin-activator.php</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>	<span class="token doc-comment comment">/**
	 * Short Description. (use period)
	 *
	 * Long Description.
	 *
	 * <span class="token keyword">@since</span>    1.0.0
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token function">is_plugin_active</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">&#39;woocommerce/woocommerce.php&#39;</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">wp_die</span><span class="token punctuation">(</span><span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Woocommerce needs to be installed &amp; active&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">__</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Activation failed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;back_link&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We also need to save the ticket codes in the database. For that we&#39;ll create a table upon activation. Moreover we&#39;ll create an upload directory for the plugin and automatically create a page for the signup process.</p><p>class-sample-plugin-activator.php</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">create_upload_dir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
	<span class="token punctuation">{</span>
		<span class="token variable">$upload_dir</span> <span class="token operator">=</span> <span class="token function">wp_upload_dir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$base_upload</span> <span class="token operator">=</span> <span class="token variable">$upload_dir</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;basedir&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	
		<span class="token function">wp_mkdir_p</span><span class="token punctuation">(</span> <span class="token variable">$base_upload</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;/sample-plugin&#39;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">create_signup_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token variable">$page_title</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Sample Plugin Signup&#39;</span><span class="token punctuation">;</span>
		<span class="token variable">$check_page_exist</span> <span class="token operator">=</span> <span class="token function">get_page_by_title</span><span class="token punctuation">(</span><span class="token variable">$page_title</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;OBJECT&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;page&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// Check if the page already exists</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$check_page_exist</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token variable">$page_id</span> <span class="token operator">=</span> <span class="token function">wp_insert_post</span><span class="token punctuation">(</span>
				<span class="token keyword">array</span><span class="token punctuation">(</span>
				<span class="token string single-quoted-string">&#39;comment_status&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;close&#39;</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">&#39;ping_status&#39;</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;close&#39;</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">&#39;post_author&#39;</span>    <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">&#39;post_title&#39;</span>     <span class="token operator">=&gt;</span> <span class="token function">ucwords</span><span class="token punctuation">(</span><span class="token variable">$page_title</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">&#39;post_name&#39;</span>      <span class="token operator">=&gt;</span> <span class="token function">strtolower</span><span class="token punctuation">(</span><span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;-&#39;</span><span class="token punctuation">,</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$page_title</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">&#39;post_status&#39;</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;publish&#39;</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">&#39;post_content&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">&#39;post_type&#39;</span>      <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;page&#39;</span><span class="token punctuation">,</span>
				<span class="token string single-quoted-string">&#39;post_slug&#39;</span>		 <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;rave&#39;</span>				
				<span class="token punctuation">)</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">update_option</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;_sample_plugin_page&#39;</span><span class="token punctuation">,</span> <span class="token variable">$page_id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// in future: we will need to set these later - </span>
			<span class="token comment">// $template_path = &#39;sample-plugin-template.php&#39;;</span>
			<span class="token comment">// update_post_meta( $page_id, &#39;_wp_page_template&#39;, $template_path );</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6);function f(w,q){const p=a("ExternalLinkIcon"),i=a("RouterLink");return l(),c("div",null,[k,g,v,m,n("p",null,[s("Wir werden das Boilerplate von "),n("a",b,[s("wppb.me"),t(p)]),s(" nutzen. Einen kurzer Einblick dazu gibt es "),t(i,{to:"/wordpress/plugins/boilerplate.html"},{default:u(()=>[s("hier")]),_:1}),s(".")]),h,r(" ![Dateistruktur](/images/sample-plugin-structure.png) "),_])}const x=o(d,[["render",f],["__file","plugin-development-setup.html.vue"]]);export{x as default};
